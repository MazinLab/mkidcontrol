{% extends 'base.html' %}

{% block content %}
    <h1>
        <div><p>Cooldown Settings</p></div>
    </h1>

    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    </head>

    <div id="testplot"></div>
    <script>
        var d = {{ dat | safe }};
        var l = {{ lay | safe }};
        Plotly.newPlot('testplot', d, l)

        function newdata() {
            $.ajax({
                url:'/create_plot/d',
                type: 'post',
                async: false,
                success: function(data) {
                    d = data
                },
                error: function() {
                    console.log('Error!!')
                }
            });
            return d;
        }

        var interval = setInterval(function() {
            newdata()
            Plotly.react('testplot', d, l)
        }, 1000);
    </script>

{% endblock %}