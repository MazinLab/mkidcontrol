{% extends 'base.html' %}

{% block content %}
    <h1>
        <div><p>Cooldown Settings</p></div>
    </h1>

    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    </head>

    <div id="testplot"></div>
    <script>
        Plotly.newPlot('testplot', {{ dat | safe }}, {{ lay | safe }})

        function newdata(type) {
            var update = [];
            $.ajax({
                url:'/create_plot/'+type,
                type: 'post',
                async: false,
                success: function(data) {
                    update = JSON.parse(data)
                },
                error: function() {
                    console.log('Error!!')
                }
            });
            return update;
        }

        var interval = setInterval(function() {
            Plotly.react('testplot', newdata('d'), newdata('l'))
        }, 1000);
    </script>

{% endblock %}